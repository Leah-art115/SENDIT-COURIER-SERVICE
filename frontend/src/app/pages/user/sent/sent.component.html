<app-user-navbar></app-user-navbar>

<div class="filter-bar">
  <input type="text" [(ngModel)]="filterName" placeholder="Search by name" />
  <input type="date" [(ngModel)]="filterDateFrom" />
  <input type="date" [(ngModel)]="filterDateTo" />

  <select [(ngModel)]="filterStatus">
    <option value="">All Statuses</option>
    <option>In Transit</option>
    <option>Delivered</option>
  </select>

  <select [(ngModel)]="filterMode">
    <option value="">All Modes</option>
    <option>Express</option>
    <option>Standard</option>
  </select>

  <select [(ngModel)]="filterType">
    <option value="">All Types</option>
    <option>Box</option>
    <option>Bag</option>
  </select>
</div>

<div class="parcel-cards">
  <div class="card" *ngFor="let p of filteredParcels">
    <h3>{{ p.trackingId }}</h3>
    <p><strong>To:</strong> {{ p.receiver }}</p>
    <p><strong>From:</strong> {{ p.from }} → <strong>To:</strong> {{ p.to }}</p>
    <p><strong>Date Sent:</strong> {{ p.dateSent }}</p>
    <p><strong>Status:</strong> {{ p.status }}</p>
    <button (click)="openMap(p)">Track</button>
    <button (click)="openInfo(p)">View More Info</button>
  </div>
</div>

<!-- MAP MODAL -->
<div class="modal" *ngIf="showMapModal">
  <div class="modal-content">
    <h3>Tracking Map - {{ selectedParcel?.trackingId }}</h3>
    <div id="google-map"></div>
    <button (click)="closeModals()">Close</button>
  </div>
</div>

<!-- INFO MODAL -->
<div class="modal" *ngIf="showInfoModal">
  <div class="modal-content">
    <h3>Parcel Details - {{ selectedParcel?.trackingId }}</h3>
    <p><strong>Receiver:</strong> {{ selectedParcel?.receiver }}</p>
    <p><strong>From:</strong> {{ selectedParcel?.from }} → <strong>To:</strong> {{ selectedParcel?.to }}</p>
    <p><strong>Status:</strong> {{ selectedParcel?.status }}</p>
    <p><strong>Description:</strong> {{ selectedParcel?.description }}</p>
    <p><strong>Type:</strong> {{ selectedParcel?.type }}</p>
    <p><strong>Weight:</strong> {{ selectedParcel?.weight }}</p>
    <p><strong>Payment Method:</strong> {{ selectedParcel?.paymentMethod }}</p>
    <p><strong>Delivery Mode:</strong> {{ selectedParcel?.deliveryMode }}</p>
    <p><strong>Expected Delivery:</strong> {{ selectedParcel?.expectedDelivery }}</p>
    <button (click)="closeModals()">Close</button>
  </div>
</div>
