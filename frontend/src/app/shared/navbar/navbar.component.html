<div class="navbar">
  <div class="navbar-container">
    <!-- Logo -->
    <div class="navbar-logo">
      <a href="#" class="logo" (click)="navigateToHome()">SENDIT</a>
    </div>

    <!-- Navigation Items -->
    <div class="navbar-menu" [ngClass]="{'active': isMenuOpen}">
      <a class="nav-item" (click)="scrollToSection('home')">Home</a>
      <a class="nav-item" (click)="scrollToSection('about')">About</a>
      <a class="nav-item" (click)="scrollToSection('services')">Services</a>
      <a class="nav-item" (click)="scrollToSection('track')">Track</a>
      <a class="nav-item" (click)="scrollToSection('faqs')">FAQs</a>
    </div>

    <!-- Auth Buttons OR User Dropdown -->
    <div class="navbar-auth" [ngClass]="{'mobile-auth': isMenuOpen}">
      <!-- Show auth buttons when not logged in AND on home page -->
      <ng-container *ngIf="!authService.isAuthenticated() && isHomePage">
        <button class="auth-btn sign-in" (click)="showLoginForm()">Sign In</button>
        <button class="auth-btn sign-up" (click)="showRegisterForm()">Sign Up</button>
      </ng-container>

      <!-- Show user dropdown when logged in AND on home page -->
      <div class="user-dropdown-container" *ngIf="authService.isAuthenticated() && isHomePage">
        <button class="user-dropdown-trigger" 
                (click)="toggleDropdown($event)" 
                [class.active]="isDropdownOpen">
          <i class="fas fa-user-astronaut user-icon"></i>
          <span class="user-name">{{ authService.getUserFirstName() || authService.getUserInitials() }}</span>
          <i class="fas fa-chevron-down arrow-icon" [class.rotated]="isDropdownOpen"></i>
        </button>

        <div class="user-dropdown-menu" [class.show]="isDropdownOpen">
          <button class="dropdown-option" (click)="navigateToDashboard($event)">
            <i class="fas fa-tachometer-alt"></i>
            <span>Go to Dashboard</span>
          </button>
          
          <button class="dropdown-option" (click)="navigateToProfile($event)">
            <i class="fas fa-user-cog"></i>
            <span>My Profile</span>
          </button>
          
          <div class="dropdown-divider"></div>
          
          <button class="dropdown-option logout-option" (click)="performLogout($event)">
            <i class="fas fa-sign-out-alt"></i>
            <span>Logout</span>
          </button>
        </div>
      </div>
    </div>

    <!-- Mobile Menu Toggle -->
    <div class="mobile-toggle" 
         [ngClass]="{'active': isMenuOpen}" 
         (click)="toggleMenu()">
      <span class="bar"></span>
      <span class="bar"></span>
      <span class="bar"></span>
    </div>
  </div>
</div>